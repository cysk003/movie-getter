import{_ as v}from"./generalDataTable-cefab4f1.js";import{a as m,_ as h}from"./base-dc71a3f3.js";import{b as g,a as _,g as p,c as C}from"./index-3297fa0a.js";import{b as k}from"./api-93c96997.js";import{d as c,r as x,h as s,e as S,f as N,w as b,u as e,o as K,a as M}from"./index-05d69c29.js";import{_ as i}from"./Button-48bb4fe6.js";import{_ as z}from"./generalModal.vue_vue_type_script_setup_true_lang-866e8e04.js";import"./Checkbox-d55c81b8.js";const B=g(),$=_(),l=c(()=>$.categoryModal),j=(t,o)=>s(z,{justify:"center"},()=>[s(i,{type:"primary",strong:!0,size:"small",secondary:!0,onClick:()=>{l.value.data=m(t),l.value.origin=t,l.value.new=!1,l.value.show=!0}},{default:()=>"修改"}),s(i,{type:"info",strong:!0,size:"small",secondary:!0,disabled:t.main,onClick:()=>{}},{default:()=>"设为主分类"}),s(i,{type:"error",strong:!0,size:"small",secondary:!0,onClick:()=>{k(t.id,(d,u)=>{B.deleteCategory(t.id)})}},{default:()=>"删除"})]),A=x([{title:"ID",key:"id",align:"center",width:"100px",ellipsis:!0},{title:"资源库名",key:"name",align:"center",minWidth:"200px",ellipsis:!0,render:(t,o)=>p(t.name)},{title:"采集类数",key:"classNum",align:"center",width:"100px"},{title:"影片数",key:"movieNum",align:"center",width:"100px"},{title:"操作",key:"actions",align:"center",width:"300px",render:(t,o)=>p(j(t))}]),H=S({__name:"category",setup(t){const o=g(),d=_(),u=c(()=>o.categories),a=c(()=>d.categoryModal),n=C(1,0,r=>{n.value.page=r}),y=()=>{let r=m({id:-1,name:"",classNum:0,movieNum:0,main:!0});a.value.data=r,a.value.new=!0,a.value.show=!0};return(r,D)=>{const f=h,w=v;return K(),N(w,{title:"自建分类",columns:e(A),data:e(u),page:e(n).page,pageCount:e(n).pageCount,update:e(n).update,add:y,isAdd:!0,keyword:e(o).categoryKeyword,updateKeyword:e(o).updatecategoryKeyword},{extra:b(()=>[M(f,{title:"分类测试",data:e(a).data,show:e(a).show,type:e(a).type,onClose:e(a).close,onSave:e(a).save},null,8,["data","show","type","onClose","onSave"])]),_:1},8,["columns","data","page","pageCount","update","keyword","updateKeyword"])}}});export{H as default};
