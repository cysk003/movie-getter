import{_ as y}from"./generalDataTable-1bb84665.js";import{c as x,_ as h}from"./base-dd3b4f3f.js";import{u as c,a as p,g as l,c as w}from"./index-095c7c1b.js";import{r as k,d as v,s as S,a as C}from"./api-380b602d.js";import{N as b}from"./Switch-058ad34d.js";import{d as i,r as K,h as r,e as M,f as N,w as z,u as t,o as B,a as V}from"./index-5e009933.js";import{_ as u}from"./Button-5f4a6113.js";import{_ as $}from"./generalModal.vue_vue_type_script_setup_true_lang-dffdccae.js";import"./Checkbox-e536c5b9.js";const j=c(),A=p();i(()=>A.sourceModal);const D=(e,a)=>r($,{justify:"center"},()=>[r(u,{type:"info",strong:!0,size:"small",secondary:!0,onClick:()=>{k(e.id,()=>{e.progress=!1})}},{default:()=>"重新采集"}),r(u,{type:"error",strong:!0,size:"small",secondary:!0,onClick:()=>{v(e.id,()=>{j.deleteMovie(e.id)})}},{default:()=>"删除"})]),I=(e,a)=>r(b,{value:e.able,onUpdateValue:d=>{e.able?S(e.id,()=>{e.able=!1}):C(e.id,()=>{e.able=!0})}}),P=K([{title:"ID",key:"id",align:"center",width:"100px",ellipsis:!0},{title:"资源库名",key:"name",align:"center",width:"150px",ellipsis:!0,render:(e,a)=>l(e.name)},{title:"资源库地址",key:"url",align:"center",minWidth:"200px",ellipsis:!0,render:(e,a)=>l(e.url)},{title:"采集进度",key:"progress",align:"center",width:"100px",render:(e,a)=>r("div",e.progress?"已完成":"未完成")},{title:"采集情况",key:"able",align:"center",width:"100px",render:I},{title:"操作",key:"actions",align:"center",width:"250px",render:(e,a)=>l(D(e))}]),Q=M({__name:"source",setup(e){const a=c(),d=p(),_=i(()=>a.sources),o=i(()=>d.sourceModal),s=w(1,1,n=>{s.value.page=n}),m=()=>{let n=x({id:-1,name:"",url:"",progress:!1,able:!1});o.value.data=n,o.value.new=!0,o.value.show=!0};return(n,U)=>{const g=h,f=y;return B(),N(f,{title:"影片管理",columns:t(P),data:t(_),page:t(s).page,pageCount:t(s).pageCount,update:t(s).update,add:m,isAdd:!0,keyword:t(a).sourceKeyword,updateKeyword:t(a).updatesourceKeyword},{extra:z(()=>[V(g,{title:"采集源",data:t(o).data,show:t(o).show,type:t(o).type,onClose:t(o).close,onSave:t(o).save},null,8,["data","show","type","onClose","onSave"])]),_:1},8,["columns","data","page","pageCount","update","keyword","updateKeyword"])}}});export{Q as default};
