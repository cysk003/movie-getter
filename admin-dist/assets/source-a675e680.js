import{_ as v}from"./generalDataTable-cefab4f1.js";import{c as p,_ as x}from"./base-dc71a3f3.js";import{u as m,a as _,g as u,c as k}from"./index-3297fa0a.js";import{r as w,d as S,s as C,a as b}from"./api-93c96997.js";import{N as M}from"./Switch-46d83932.js";import{d,r as K,h as r,e as z,f as N,w as B,u as t,o as V,a as $}from"./index-05d69c29.js";import{_ as i}from"./Button-48bb4fe6.js";import{_ as j}from"./generalModal.vue_vue_type_script_setup_true_lang-866e8e04.js";import"./Checkbox-d55c81b8.js";const A=m(),D=_(),l=d(()=>D.sourceModal),I=(e,a)=>r(j,{justify:"center"},()=>[r(i,{type:"primary",strong:!0,size:"small",secondary:!0,onClick:()=>{l.value.data=p(e),l.value.origin=e,l.value.new=!1,l.value.show=!0}},{default:()=>"修改"}),r(i,{type:"info",strong:!0,size:"small",secondary:!0,onClick:()=>{w(e.id,()=>{e.progress=!1})}},{default:()=>"重新采集"}),r(i,{type:"error",strong:!0,size:"small",secondary:!0,onClick:()=>{S(e.id,()=>{A.deleteMovie(e.id)})}},{default:()=>"删除"})]),P=(e,a)=>r(M,{value:e.able,onUpdateValue:c=>{e.able?C(e.id,()=>{e.able=!1}):b(e.id,()=>{e.able=!0})}}),U=K([{title:"ID",key:"id",align:"center",width:"100px",ellipsis:!0},{title:"资源库名",key:"name",align:"center",width:"150px",ellipsis:!0,render:(e,a)=>u(e.name)},{title:"资源库地址",key:"url",align:"center",minWidth:"200px",ellipsis:!0,render:(e,a)=>u(e.url)},{title:"采集进度",key:"progress",align:"center",width:"100px",render:(e,a)=>r("div",e.progress?"已完成":"未完成")},{title:"采集情况",key:"able",align:"center",width:"100px",render:P},{title:"操作",key:"actions",align:"center",width:"250px",render:(e,a)=>u(I(e))}]),R=z({__name:"source",setup(e){const a=m(),c=_(),g=d(()=>a.sources),o=d(()=>c.sourceModal),s=k(1,1,n=>{s.value.page=n}),f=()=>{let n=p({id:-1,name:"",url:"",progress:!1,able:!1});o.value.data=n,o.value.new=!0,o.value.show=!0};return(n,W)=>{const y=x,h=v;return V(),N(h,{title:"影片管理",columns:t(U),data:t(g),page:t(s).page,pageCount:t(s).pageCount,update:t(s).update,add:f,isAdd:!0,keyword:t(a).sourceKeyword,updateKeyword:t(a).updatesourceKeyword},{extra:B(()=>[$(y,{title:"采集源测试",data:t(o).data,show:t(o).show,type:t(o).type,onClose:t(o).close,onSave:t(o).save},null,8,["data","show","type","onClose","onSave"])]),_:1},8,["columns","data","page","pageCount","update","keyword","updateKeyword"])}}});export{R as default};
